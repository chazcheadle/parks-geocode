<!DOCTYPE html>
<html>
<head>
<title>Place searches</title>
<script src="http://ajax.aspnetcdn.com/ajax/jQuery/jquery-1.11.2.min.js"></script>
<meta name="viewport" content="initial-scale=1.0, user-scalable=no">
<meta charset="utf-8">
<style>
html {
  font-family: 'arial';
}
</style>
<script src="https://maps.googleapis.com/maps/api/js?v=3.exp&signed_in=true&libraries=places"></script>
<script>

parks = [
  "-73.81325072900,42.47729103310",
  "-73.72734728390,42.69614492160",
  "-73.83483048940,42.70443346800",
  "-74.03482872710,42.70385821600",
  "-73.83506734530,42.70687436340",
  "-74.21218736740,42.44789548980",
  "-74.04253860750,42.51062721170",
  "-74.03200166150,42.70163299880",
  "-74.03249573530,42.70111063520",
  "-73.88283374710,42.58262934860",
  "-74.12338788270,42.66620482830",
  "-74.12805585870,42.67096573020",
  "-74.20960139900,42.52165530140",
  "-73.92837418200,42.63811338880",
  "-73.92755127820,42.64167670480",
  "-73.84290213440,42.67752818780",
  "-73.93403167830,42.70039579500",
  "-73.91553371350,42.73379890010",
  "-73.90579588140,42.73490522990",
  "-73.92753575960,42.73595519760",
  "-73.96756359230,42.70674173270",
  "-73.91005529060,42.73743025740",
  "-73.91139804750,42.68472897050",
  "-73.94650754340,42.75044195960",
  "-73.86287195400,42.47602594870",
  "-73.70903213620,42.78088623100",
  "-73.71127701760,42.77265373010",
  "-73.70049252120,42.77462953410",
  "-73.70255099530,42.76507999990",
  "-73.70216849480,42.76283305600",
  "-73.70287796990,42.76366361750",
  "-73.70256914770,42.76200128010",
  "-73.69641380030,42.77525109390",
  "-74.16107325070,42.60826756060",
  "-73.71177149560,42.78432339490",
  "-73.71492707700,42.79283779930",
  "-73.70249219210,42.77699769180",
  "-73.70604390840,42.78016527630",
  "-73.70666463110,42.78028712510",
  "-73.70575386200,42.77917261910",
  "-73.70691111940,42.78166430570",
  "-73.70738508380,42.78239618120",
  "-73.72565670320,42.79013369840",
  "-73.71163597130,42.78376689730",
  "-73.70815980650,42.77049443230",
  "-73.71887676330,42.78153279280",
  "-73.72031344900,42.78201784710",
  "-73.69910136170,42.77036243820",
  "-73.71093867820,42.77392366910",
  "-73.68891740850,42.76803252830",
  "-73.70988684110,42.78268193160",
  "-73.71021747320,42.76843084700",
  "-73.69393079410,42.76568925610",
  "-73.69267553930,42.76545229280",
  "-73.69257003330,42.76575799290",
  "-73.69369009930,42.76596972890",
  "-73.69358839030,42.76640441880",
  "-73.69264817220,42.76622585090",
  "-73.69228619470,42.76615748460",
  "-73.75041319110,42.65430625730",
  "-73.75390756920,42.65787541740",
  "-73.75164775400,42.65660833200",
  "-73.78125220080,42.66081682420",
  "-73.75342666500,42.65971550460",
  "-73.76114891890,42.66317924800",
  "-73.76111426370,42.66311105030",
  "-73.76105535600,42.66307868840",
  "-73.76099617280,42.66304493800",
  "-73.76091117660,42.66321259930",
  "-73.83398616290,42.64399923570",
  "-73.75859003180,42.65768238230",
  "-73.75844119590,42.65757608400",
  "-73.82184123960,42.65256544520",
  "-73.77428646000,42.66892481850",
  "-73.78857764960,42.65932562070",
  "-73.78846723800,42.65926257670",
  "-73.78837577840,42.65920952120",
  "-73.78826629140,42.65914689820",
  "-73.76074559190,42.67738984560",
  "-73.79872350230,42.65937160140",
  "-73.79879165820,42.65930645040",
  "-73.79908126410,42.65947348030",
  "-73.79901307450,42.65953844150",
  "-73.77503808670,42.66992764430",
  "-73.78810244750,42.65905273090",
  "-73.78795537410,42.65896736940",
  "-73.77777707990,42.67132459190",
  "-73.78848711590,42.65690254170",
  "-73.79000126430,42.65774270340",
  "-73.78870531090,42.65940012970",
  "-73.78795219990,42.66001419940",
  "-73.76918991060,42.65695834020",
  "-73.77395857150,42.65760740750",
  "-73.74148625700,42.67206566010",
  "-73.73887312630,42.67178653090",
  "-73.74418848220,42.66278759700",
  "-73.74301242920,42.67096581760",
  "-73.77900488160,42.66510105710",
  "-73.76711950880,42.66799173140",
  "-73.79099707830,42.67321081150"
];

function lookupName() {
  if (document.getElementById("getCoords").value) {
    parks = [];
    parks = ['getElementById("getCoords").value'];
  }
  // Limit to 5 for testing.
  for (i = 0; i < 5; i++) {
    coords = parks[i].split(',');
    lat = coords[1];
    lng = coords[0];
    var lookupCoords = new google.maps.LatLng(coords[1], coords[0]);

    var request = {
      location: lookupCoords,
                radius: 10000,
                types: ['park']
    };

    var service = new google.maps.places.PlacesService($('#temp').get(0));
    service.nearbySearch(request, callback);
    sleep(101);
  }
}

function callback(results, status) {
  if (status == google.maps.places.PlacesServiceStatus.OK) {
    $('#controls').hide();
    if (results.length) {
      console.log(results[0]);
      result = results[0].geometry.location.D + ', ' + results[0].geometry.location.k + ', ' + results[0].name + "</br>";
      $('#list').append(result);
    }
  }
  else {
    console.log(google.maps.places.PlacesServiceStatus);
  }
}

function sleep(milliseconds) {
  var start = new Date().getTime();
  for (var i = 0; i < 1e7; i++) {
    if ((new Date().getTime() - start) > milliseconds){
       break;
    }
  }
}

</script>
</head>
<body>
<div id="controls">
  <input type="text" id="getCoords">
  <button id="getName" onClick="lookupName();">Lookup Name</button>
  <div id="temp"></div>
</div>
<div id="list"></div>
</body>
</html>
